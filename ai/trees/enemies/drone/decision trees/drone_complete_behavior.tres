[gd_resource type="BehaviorTree" load_steps=50 format=3 uid="uid://c7vvmbp7vehqy"]

[ext_resource type="Script" uid="uid://3wp8o6jifb3l" path="res://ai/tasks/drone/drone_patrol_action.gd" id="1_128xi"]
[ext_resource type="Script" uid="uid://dhngbs7qm6328" path="res://ai/tasks/drone/is_object_in_proximity_zone_condition.gd" id="1_ckfmh"]
[ext_resource type="BlackboardPlan" uid="uid://13kdtfbmqd6l" path="res://ai/trees/enemies/drone/decision trees/drone_complete_behavior_blackboard_plan.tres" id="1_k8dvn"]
[ext_resource type="Script" uid="uid://4tpean3rpeo8" path="res://ai/tasks/drone/drone_block_action.gd" id="2_ckfmh"]
[ext_resource type="Script" uid="uid://bbbdpq3yu2mga" path="res://ai/tasks/drone/is_outside_patrol_markers_condition.gd" id="3_xekj4"]
[ext_resource type="Script" uid="uid://c3n51ki08yi4c" path="res://ai/tasks/drone/drone_track_action.gd" id="4_ckfmh"]
[ext_resource type="Script" uid="uid://brqg8vvudgc7a" path="res://ai/tasks/drone/is_in_targeting_state_condition.gd" id="4_v0ahm"]
[ext_resource type="Script" uid="uid://b2j2u7t3dp4en" path="res://ai/tasks/drone/drone_ram_attack_action.gd" id="5_ntcwm"]
[ext_resource type="Script" uid="uid://btr4jxosdlhew" path="res://ai/tasks/drone/drone_go_to_patrol_action.gd" id="5_xekj4"]
[ext_resource type="Script" uid="uid://cwyxhwigonm30" path="res://ai/tasks/drone/check_on_player_bool_value_action.gd" id="8_mcvek"]
[ext_resource type="Script" uid="uid://cw5lgdcrky3nb" path="res://ai/tasks/drone/drone_beam_attack_action.gd" id="8_v0ahm"]

[sub_resource type="BTCondition" id="BTCondition_ntcwm"]
script = ExtResource("1_ckfmh")
object_type = "Control Node"

[sub_resource type="BTAction" id="BTAction_k8dvn"]
script = ExtResource("2_ckfmh")

[sub_resource type="BBVariant" id="BBVariant_mcvek"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTSetVar" id="BTSetVar_65x83"]
variable = &"attacking"
value = SubResource("BBVariant_mcvek")

[sub_resource type="BTSequence" id="BTSequence_v0ahm"]
custom_name = "BLOCK"
children = [SubResource("BTCondition_ntcwm"), SubResource("BTAction_k8dvn"), SubResource("BTSetVar_65x83")]

[sub_resource type="BBVariant" id="BBVariant_k8dvn"]
type = 1
saved_value = false
resource_name = "false"

[sub_resource type="BTCheckVar" id="BTCheckVar_v0ahm"]
variable = &"attacking"
value = SubResource("BBVariant_k8dvn")

[sub_resource type="BTCondition" id="BTCondition_vc7r2"]
script = ExtResource("4_v0ahm")
expected_state = 3

[sub_resource type="BBVariant" id="BBVariant_65x83"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTSetVar" id="BTSetVar_r3tiw"]
variable = &"attacking"
value = SubResource("BBVariant_65x83")

[sub_resource type="BTSequence" id="BTSequence_kr7to"]
children = [SubResource("BTCondition_vc7r2"), SubResource("BTSetVar_r3tiw")]

[sub_resource type="BTCondition" id="BTCondition_ckfmh"]
script = ExtResource("4_v0ahm")
expected_state = 2

[sub_resource type="BTAction" id="BTAction_v0ahm"]
script = ExtResource("4_ckfmh")
timeout = 3.0

[sub_resource type="BBVariant" id="BBVariant_v0ahm"]
type = 1
saved_value = false
resource_name = "<null>"

[sub_resource type="BTSetVar" id="BTSetVar_mcvek"]
variable = &"attacking"
value = SubResource("BBVariant_v0ahm")

[sub_resource type="BTSequence" id="BTSequence_k8dvn"]
children = [SubResource("BTCondition_ckfmh"), SubResource("BTAction_v0ahm"), SubResource("BTSetVar_mcvek")]

[sub_resource type="BTCondition" id="BTCondition_xekj4"]
script = ExtResource("3_xekj4")
tolerance = 2.0

[sub_resource type="BTAction" id="BTAction_ckfmh"]
script = ExtResource("5_xekj4")

[sub_resource type="BTSequence" id="BTSequence_ntcwm"]
children = [SubResource("BTCondition_xekj4"), SubResource("BTAction_ckfmh")]

[sub_resource type="BTDynamicSelector" id="BTDynamicSelector_v0ahm"]
children = [SubResource("BTSequence_kr7to"), SubResource("BTSequence_k8dvn"), SubResource("BTSequence_ntcwm")]

[sub_resource type="BTDynamicSequence" id="BTDynamicSequence_v0ahm"]
custom_name = "NOT ATTACKING"
children = [SubResource("BTCheckVar_v0ahm"), SubResource("BTDynamicSelector_v0ahm")]

[sub_resource type="BBVariant" id="BBVariant_664xi"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_wyg27"]
variable = &"attacking"
value = SubResource("BBVariant_664xi")

[sub_resource type="BTAction" id="BTAction_ntcwm"]
script = ExtResource("4_ckfmh")
timeout = 2.0

[sub_resource type="BTAction" id="BTAction_65x83"]
script = ExtResource("8_mcvek")
var_type = "dribbling"

[sub_resource type="BTAction" id="BTAction_mcvek"]
script = ExtResource("8_v0ahm")
metadata/_weight_ = 4.000000000000001

[sub_resource type="BTAction" id="BTAction_r3tiw"]
script = ExtResource("5_ntcwm")

[sub_resource type="BTProbabilitySelector" id="BTProbabilitySelector_65x83"]
children = [SubResource("BTAction_mcvek"), SubResource("BTAction_r3tiw")]

[sub_resource type="BTSequence" id="BTSequence_664xi"]
children = [SubResource("BTAction_65x83"), SubResource("BTProbabilitySelector_65x83")]

[sub_resource type="BTAction" id="BTAction_wyg27"]
script = ExtResource("5_ntcwm")
metadata/_weight_ = 0.25

[sub_resource type="BTAction" id="BTAction_bnf7k"]
script = ExtResource("8_v0ahm")

[sub_resource type="BTProbabilitySelector" id="BTProbabilitySelector_8hvrt"]
children = [SubResource("BTAction_wyg27"), SubResource("BTAction_bnf7k")]

[sub_resource type="BTSelector" id="BTSelector_wg5t1"]
children = [SubResource("BTSequence_664xi"), SubResource("BTProbabilitySelector_8hvrt")]

[sub_resource type="BBVariant" id="BBVariant_bnf7k"]
type = 1
saved_value = false
resource_name = "<null>"

[sub_resource type="BTSetVar" id="BTSetVar_8hvrt"]
variable = &"attacking"
value = SubResource("BBVariant_bnf7k")

[sub_resource type="BTSequence" id="BTSequence_wg5t1"]
custom_name = "ATTACKING"
children = [SubResource("BTCheckVar_wyg27"), SubResource("BTAction_ntcwm"), SubResource("BTSelector_wg5t1"), SubResource("BTSetVar_8hvrt")]

[sub_resource type="BTAction" id="BTAction_jhpx3"]
script = ExtResource("1_128xi")

[sub_resource type="BTDynamicSelector" id="BTDynamicSelector_yfevx"]
custom_name = "Main Behavior Selector"
children = [SubResource("BTSequence_v0ahm"), SubResource("BTDynamicSequence_v0ahm"), SubResource("BTSequence_wg5t1"), SubResource("BTAction_jhpx3")]

[resource]
blackboard_plan = ExtResource("1_k8dvn")
root_task = SubResource("BTDynamicSelector_yfevx")
