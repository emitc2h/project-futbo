[gd_resource type="BehaviorTree" load_steps=41 format=3 uid="uid://bupxcd5gypwjw"]

[ext_resource type="BehaviorTree" uid="uid://cquw7q8b04nvv" path="res://ai/trees/enemies/drone/action trees/prepare_attack.tres" id="1_c56d0"]
[ext_resource type="Script" uid="uid://66mhcr7w8o2f" path="res://ai/tasks/drone/face_node_action.gd" id="2_ka74d"]
[ext_resource type="Script" uid="uid://d2x8xeh13xlky" path="res://ai/tasks/drone/move_to_node_action.gd" id="3_2oxck"]
[ext_resource type="Script" uid="uid://d1tnddd353x4b" path="res://ai/tasks/drone/force_update_player_pos_action.gd" id="4_07ws4"]
[ext_resource type="Script" uid="uid://c0g56qdf14eqt" path="res://ai/tasks/drone/check_on_player_float_value_action.gd" id="5_kjo3e"]
[ext_resource type="Script" uid="uid://cetf63fmdqa02" path="res://ai/tasks/drone/set_vulnerability_action.gd" id="6_g4rni"]
[ext_resource type="Script" uid="uid://4s4ljp3laybn" path="res://ai/tasks/drone/set_proximity_action.gd" id="7_dbqqm"]
[ext_resource type="Script" uid="uid://503g2foi17mj" path="res://ai/tasks/drone/ram_attack_action.gd" id="8_hf70u"]
[ext_resource type="Script" uid="uid://wa54421i351d" path="res://ai/tasks/drone/recover_from_ball_action.gd" id="9_wwqgq"]
[ext_resource type="Script" uid="uid://c6ocf77l1pyn7" path="res://ai/tasks/drone/set_targeting_action.gd" id="10_cpp0p"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_mwt5i"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_kvusy"]

[sub_resource type="BTSubtree" id="BTSubtree_w25pf"]
subtree = ExtResource("1_c56d0")
blackboard_plan = SubResource("BlackboardPlan_kvusy")
custom_name = "Prepare Attack"

[sub_resource type="BBNode" id="BBNode_37lm4"]
saved_value = NodePath("")

[sub_resource type="BTAction" id="BTAction_f4rlh"]
script = ExtResource("2_ka74d")
custom_node = SubResource("BBNode_37lm4")
target_type = "target node"
away = true

[sub_resource type="BBNode" id="BBNode_vycg0"]
saved_value = NodePath("")

[sub_resource type="BTAction" id="BTAction_7dl2e"]
script = ExtResource("3_2oxck")
custom_node = SubResource("BBNode_vycg0")
target_type = "player representation"
away = true
far_enough_distance = 11.0
use_burst = true

[sub_resource type="BBNode" id="BBNode_xv22h"]
saved_value = NodePath("")

[sub_resource type="BTAction" id="BTAction_4ni3o"]
script = ExtResource("2_ka74d")
custom_node = SubResource("BBNode_xv22h")
target_type = "target node"

[sub_resource type="BTAction" id="BTAction_ibqqj"]
script = ExtResource("4_07ws4")

[sub_resource type="BTAction" id="BTAction_o216n"]
script = ExtResource("5_kjo3e")
var_type = "x distance"
operator_type = "greater than"
value = 7.0

[sub_resource type="BTSequence" id="BTSequence_m2j3o"]
children = [SubResource("BTAction_4ni3o"), SubResource("BTAction_ibqqj"), SubResource("BTAction_o216n")]

[sub_resource type="BTAction" id="BTAction_w0b5i"]
script = ExtResource("6_g4rni")
vuln_type = "invulnerable"

[sub_resource type="BTAction" id="BTAction_as8or"]
script = ExtResource("7_dbqqm")
state_type = "disabled"

[sub_resource type="BBNode" id="BBNode_vmk60"]
saved_value = NodePath("")

[sub_resource type="BTAction" id="BTAction_wtpsy"]
script = ExtResource("2_ka74d")
custom_node = SubResource("BBNode_vmk60")
target_type = "target node"

[sub_resource type="BTAction" id="BTAction_akb7f"]
script = ExtResource("8_hf70u")
burst_duration = 0.8

[sub_resource type="BTWait" id="BTWait_l7thg"]
duration = 1.3

[sub_resource type="BTSequence" id="BTSequence_gafl3"]
custom_name = "Attack"
children = [SubResource("BTAction_f4rlh"), SubResource("BTAction_7dl2e"), SubResource("BTSequence_m2j3o"), SubResource("BTAction_w0b5i"), SubResource("BTAction_as8or"), SubResource("BTAction_wtpsy"), SubResource("BTAction_akb7f"), SubResource("BTWait_l7thg")]

[sub_resource type="BBNode" id="BBNode_hhnvh"]
saved_value = NodePath("")

[sub_resource type="BTAction" id="BTAction_e218x"]
script = ExtResource("2_ka74d")
custom_node = SubResource("BBNode_hhnvh")
target_type = "target node"
async = true

[sub_resource type="BTAction" id="BTAction_ck2kq"]
script = ExtResource("6_g4rni")
vuln_type = "vulnerable"

[sub_resource type="BTAction" id="BTAction_to6ue"]
script = ExtResource("9_wwqgq")

[sub_resource type="BTAction" id="BTAction_1m5uf"]
script = ExtResource("6_g4rni")
vuln_type = "defendable"

[sub_resource type="BTAction" id="BTAction_ub1uf"]
script = ExtResource("7_dbqqm")
state_type = "enabled"

[sub_resource type="BTAction" id="BTAction_773l2"]
script = ExtResource("10_cpp0p")
targ_type = "enabled"
enable_to_acquiring = true

[sub_resource type="BBNode" id="BBNode_qrln5"]
saved_value = NodePath("")

[sub_resource type="BTAction" id="BTAction_vigeg"]
script = ExtResource("3_2oxck")
custom_node = SubResource("BBNode_qrln5")
target_type = "target node"
close_enough_distance = 6.2
use_thrust = true

[sub_resource type="BTSequence" id="BTSequence_ums7f"]
custom_name = "Post-Attack"
children = [SubResource("BTAction_e218x"), SubResource("BTAction_ck2kq"), SubResource("BTAction_to6ue"), SubResource("BTAction_1m5uf"), SubResource("BTAction_ub1uf"), SubResource("BTAction_773l2"), SubResource("BTAction_vigeg")]

[sub_resource type="BTSelector" id="BTSelector_3ubgr"]
custom_name = "Main Sequence"
children = [SubResource("BTSubtree_w25pf"), SubResource("BTSequence_gafl3"), SubResource("BTSequence_ums7f")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_mwt5i")
root_task = SubResource("BTSelector_3ubgr")
