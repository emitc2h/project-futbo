[gd_resource type="BehaviorTree" load_steps=39 format=3 uid="uid://cquw7q8b04nvv"]

[ext_resource type="Script" uid="uid://og2wfxp7v822" path="res://ai/tasks/drone/is_in_physics_state_condition.gd" id="1_ij7aa"]
[ext_resource type="Script" uid="uid://dhptod8wkftxr" path="res://ai/tasks/drone/set_physics_action.gd" id="2_8ybrv"]
[ext_resource type="Script" uid="uid://bq6jhax0oj50u" path="res://ai/tasks/drone/is_in_engagement_state_condition.gd" id="3_45o57"]
[ext_resource type="Script" uid="uid://ccb4gyv0lb1qr" path="res://ai/tasks/drone/open_action.gd" id="4_6ghmq"]
[ext_resource type="Script" uid="uid://b467pd73p0l2y" path="res://ai/tasks/drone/is_in_vulnerability_state_condition.gd" id="5_1brxe"]
[ext_resource type="Script" uid="uid://cetf63fmdqa02" path="res://ai/tasks/drone/set_vulnerability_action.gd" id="6_dp66l"]
[ext_resource type="Script" uid="uid://cryuu1jycrokl" path="res://ai/tasks/drone/is_in_engines_state_condition.gd" id="7_vev1m"]
[ext_resource type="Script" uid="uid://cjmmtaigaxfy3" path="res://ai/tasks/drone/set_engines_action.gd" id="8_xybi2"]
[ext_resource type="Script" uid="uid://brqg8vvudgc7a" path="res://ai/tasks/drone/is_in_targeting_state_condition.gd" id="9_vdlaj"]
[ext_resource type="Script" uid="uid://c6ocf77l1pyn7" path="res://ai/tasks/drone/set_targeting_action.gd" id="10_1bq67"]
[ext_resource type="Script" uid="uid://d1tnddd353x4b" path="res://ai/tasks/drone/force_update_player_pos_action.gd" id="11_peddo"]
[ext_resource type="Script" uid="uid://c57f4wu7njwuq" path="res://ai/tasks/drone/is_facing_condition.gd" id="12_dee70"]
[ext_resource type="Script" uid="uid://66mhcr7w8o2f" path="res://ai/tasks/drone/face_node_action.gd" id="13_ksjnk"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_ij7aa"]

[sub_resource type="BTCondition" id="BTCondition_ds6oe"]
script = ExtResource("1_ij7aa")

[sub_resource type="BTAction" id="BTAction_l1bio"]
script = ExtResource("2_8ybrv")
phys_type = "char"

[sub_resource type="BTSelector" id="BTSelector_nurat"]
custom_name = "Make sure drone is in CHAR mode"
children = [SubResource("BTCondition_ds6oe"), SubResource("BTAction_l1bio")]

[sub_resource type="BTCondition" id="BTCondition_takt0"]
script = ExtResource("3_45o57")
expected_state = 2

[sub_resource type="BTAction" id="BTAction_hkiqd"]
script = ExtResource("4_6ghmq")
check_signal_id = true

[sub_resource type="BTSelector" id="BTSelector_qi5sh"]
custom_name = "Make sure drone is OPEN"
children = [SubResource("BTCondition_takt0"), SubResource("BTAction_hkiqd")]

[sub_resource type="BTCondition" id="BTCondition_36dbe"]
script = ExtResource("5_1brxe")
expected_state = 1

[sub_resource type="BTAction" id="BTAction_c4b2n"]
script = ExtResource("6_dp66l")
vuln_type = "defendable"

[sub_resource type="BTSelector" id="BTSelector_vi40o"]
custom_name = "Make sure drone is DEFENDABLE"
children = [SubResource("BTCondition_36dbe"), SubResource("BTAction_c4b2n")]

[sub_resource type="BTCondition" id="BTCondition_6m3c6"]
script = ExtResource("7_vev1m")

[sub_resource type="BTAction" id="BTAction_7wn5s"]
script = ExtResource("8_xybi2")
eng_type = "quick stop"

[sub_resource type="BTSelector" id="BTSelector_ijkft"]
custom_name = "Make sure engines are OFF"
children = [SubResource("BTCondition_6m3c6"), SubResource("BTAction_7wn5s")]

[sub_resource type="BTCondition" id="BTCondition_yqd4f"]
script = ExtResource("9_vdlaj")

[sub_resource type="BTInvert" id="BTInvert_oivjr"]
children = [SubResource("BTCondition_yqd4f")]

[sub_resource type="BTAction" id="BTAction_hmsb1"]
script = ExtResource("10_1bq67")
targ_type = "enabled"
enable_to_acquiring = true

[sub_resource type="BTSelector" id="BTSelector_6l8cf"]
custom_name = "Make sure targeting is ENABLED"
children = [SubResource("BTInvert_oivjr"), SubResource("BTAction_hmsb1")]

[sub_resource type="BTAction" id="BTAction_opu84"]
script = ExtResource("11_peddo")

[sub_resource type="BTAlwaysFail" id="BTAlwaysFail_8fqua"]
children = [SubResource("BTAction_opu84")]

[sub_resource type="BBNode" id="BBNode_vqmxy"]
saved_value = NodePath("")

[sub_resource type="BTCondition" id="BTCondition_6s85b"]
script = ExtResource("12_dee70")
custom_node = SubResource("BBNode_vqmxy")
target_type = "player representation"

[sub_resource type="BBNode" id="BBNode_ax46t"]
saved_value = NodePath("")

[sub_resource type="BTAction" id="BTAction_rlv2r"]
script = ExtResource("13_ksjnk")
custom_node = SubResource("BBNode_ax46t")
target_type = "player representation"

[sub_resource type="BTSelector" id="BTSelector_hka8r"]
custom_name = "Make sure drone faces player"
children = [SubResource("BTAlwaysFail_8fqua"), SubResource("BTCondition_6s85b"), SubResource("BTAction_rlv2r")]

[sub_resource type="BTParallel" id="BTParallel_e2ax7"]
num_successes_required = 6
custom_name = "Prepare Attack"
children = [SubResource("BTSelector_nurat"), SubResource("BTSelector_qi5sh"), SubResource("BTSelector_vi40o"), SubResource("BTSelector_ijkft"), SubResource("BTSelector_6l8cf"), SubResource("BTSelector_hka8r")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_ij7aa")
root_task = SubResource("BTParallel_e2ax7")
