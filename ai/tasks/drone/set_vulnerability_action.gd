@tool
class_name SetVulnerabilityAction
extends BTAction

const VULNERABLE: String = "vulnerable"
const DEFENDABLE: String = "defendable"
const INVULNERABLE: String = "invulnerable"

@export_enum(VULNERABLE, DEFENDABLE, INVULNERABLE) var vuln_type: String

var drone: Drone


func _generate_name() -> String:
	return "Set vulnerability to " + vuln_type
		

func _setup() -> void:
	drone = agent as Drone


func _tick(_delta: float) -> Status:
	match(vuln_type):
		VULNERABLE:
			print("Becoming VULNERABLE at ", Engine.get_physics_frames())
			drone.become_vulnerable()
		DEFENDABLE:
			print("Becoming DEFENDABLE at ", Engine.get_physics_frames())
			drone.become_defendable()
		INVULNERABLE:
			print("Becoming INVULNERABLE at ", Engine.get_physics_frames())
			drone.become_invulnerable()
	return SUCCESS
