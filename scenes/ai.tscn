[gd_scene load_steps=11 format=3 uid="uid://thoxaas4qsn2"]

[ext_resource type="Script" path="res://scripts/ai_player.gd" id="1_1rtat"]
[ext_resource type="Script" path="res://scripts/behaviors.gd" id="3_a7b8c"]
[ext_resource type="Script" path="res://addons/godot_state_charts/state_chart.gd" id="4_j3d0q"]
[ext_resource type="Script" path="res://addons/godot_state_charts/compound_state.gd" id="5_f53mt"]
[ext_resource type="Script" path="res://addons/godot_state_charts/atomic_state.gd" id="6_yp4tx"]
[ext_resource type="Script" path="res://scripts/seek_skill.gd" id="7_c40bk"]
[ext_resource type="Script" path="res://addons/godot_state_charts/transition.gd" id="7_shp3v"]
[ext_resource type="Script" path="res://scripts/dribble_skill.gd" id="8_ouj1d"]
[ext_resource type="Script" path="res://scripts/kick_skill.gd" id="9_e8fx1"]
[ext_resource type="Script" path="res://scripts/jump_skill.gd" id="10_btpul"]

[node name="AI" type="Node2D"]
script = ExtResource("1_1rtat")

[node name="Behaviors" type="Node2D" parent="." node_paths=PackedStringArray("seek_skill", "dribble_skill", "kick_skill", "jump_skill")]
script = ExtResource("3_a7b8c")
seek_skill = NodePath("SeekSkill")
dribble_skill = NodePath("DribbleSkill")
kick_skill = NodePath("KickSkill")
jump_skill = NodePath("JumpSkill")

[node name="State" type="Node" parent="Behaviors"]
script = ExtResource("4_j3d0q")

[node name="root" type="Node" parent="Behaviors/State"]
script = ExtResource("5_f53mt")
initial_state = NodePath("seek")

[node name="seek" type="Node" parent="Behaviors/State/root"]
script = ExtResource("6_yp4tx")

[node name="to attack" type="Node" parent="Behaviors/State/root/seek"]
script = ExtResource("7_shp3v")
to = NodePath("../../attack")
event = &"seek to attack"
delay_in_seconds = "0.0"

[node name="to reset" type="Node" parent="Behaviors/State/root/seek"]
script = ExtResource("7_shp3v")
to = NodePath("../../reset")
event = &"seek to reset"
delay_in_seconds = "0.0"

[node name="attack" type="Node" parent="Behaviors/State/root"]
script = ExtResource("6_yp4tx")

[node name="to reset" type="Node" parent="Behaviors/State/root/attack"]
script = ExtResource("7_shp3v")
to = NodePath("../../reset")
event = &"attack to reset"
delay_in_seconds = "0.0"

[node name="to idle" type="Node" parent="Behaviors/State/root/attack"]
script = ExtResource("7_shp3v")
to = NodePath("../../idle")
event = &"attack to idle"
delay_in_seconds = "0.0"

[node name="to seek" type="Node" parent="Behaviors/State/root/attack"]
script = ExtResource("7_shp3v")
to = NodePath("../../seek")
event = &"attack to seek"
delay_in_seconds = "0.0"

[node name="to confused" type="Node" parent="Behaviors/State/root/attack"]
script = ExtResource("7_shp3v")
to = NodePath("../../confused")
event = &"attack to confused"
delay_in_seconds = "0.0"

[node name="celebrate" type="Node" parent="Behaviors/State/root"]
script = ExtResource("6_yp4tx")

[node name="to reset" type="Node" parent="Behaviors/State/root/celebrate"]
script = ExtResource("7_shp3v")
to = NodePath("../../reset")
event = &"celebrate to reset"
delay_in_seconds = "0.0"

[node name="reset" type="Node" parent="Behaviors/State/root"]
script = ExtResource("6_yp4tx")

[node name="to seek" type="Node" parent="Behaviors/State/root/reset"]
script = ExtResource("7_shp3v")
to = NodePath("../../seek")
event = &"reset to seek"
delay_in_seconds = "0.0"

[node name="idle" type="Node" parent="Behaviors/State/root"]
script = ExtResource("6_yp4tx")

[node name="to celebrate" type="Node" parent="Behaviors/State/root/idle"]
script = ExtResource("7_shp3v")
to = NodePath("../../celebrate")
event = &"idle to celebrate"
delay_in_seconds = "0.2"

[node name="to reset" type="Node" parent="Behaviors/State/root/idle"]
script = ExtResource("7_shp3v")
to = NodePath("../../reset")
event = &"idle to reset"
delay_in_seconds = "0.0"

[node name="confused" type="Node" parent="Behaviors/State/root"]
script = ExtResource("6_yp4tx")

[node name="to seek" type="Node" parent="Behaviors/State/root/confused"]
script = ExtResource("7_shp3v")
to = NodePath("../../seek")
event = &"confused to seek"
delay_in_seconds = "0.8"

[node name="SeekSkill" type="Node" parent="Behaviors"]
script = ExtResource("7_c40bk")

[node name="DribbleSkill" type="Node" parent="Behaviors"]
script = ExtResource("8_ouj1d")

[node name="KickSkill" type="Node" parent="Behaviors"]
script = ExtResource("9_e8fx1")

[node name="JumpSkill" type="Node" parent="Behaviors"]
script = ExtResource("10_btpul")

[node name="CelebrationTimer" type="Timer" parent="Behaviors"]
wait_time = 4.0

[node name="IdleTimer" type="Timer" parent="Behaviors"]

[connection signal="state_physics_processing" from="Behaviors/State/root/seek" to="Behaviors" method="_on_seek_state_physics_processing"]
[connection signal="state_entered" from="Behaviors/State/root/attack" to="Behaviors" method="_on_attack_state_entered"]
[connection signal="state_physics_processing" from="Behaviors/State/root/attack" to="Behaviors" method="_on_attack_state_physics_processing"]
[connection signal="state_entered" from="Behaviors/State/root/celebrate" to="Behaviors" method="_on_celebrate_state_entered"]
[connection signal="state_physics_processing" from="Behaviors/State/root/celebrate" to="Behaviors" method="_on_celebrate_state_physics_processing"]
[connection signal="state_physics_processing" from="Behaviors/State/root/reset" to="Behaviors" method="_on_reset_state_physics_processing"]
[connection signal="state_entered" from="Behaviors/State/root/idle" to="Behaviors" method="_on_idle_state_entered"]
[connection signal="state_entered" from="Behaviors/State/root/confused" to="Behaviors" method="_on_confused_state_entered"]
[connection signal="timeout" from="Behaviors/CelebrationTimer" to="Behaviors" method="_on_celebration_timer_timeout"]
[connection signal="timeout" from="Behaviors/IdleTimer" to="Behaviors" method="_on_idle_timer_timeout"]
