[gd_scene load_steps=11 format=3 uid="uid://d1ewxnn4pejar"]

[ext_resource type="Script" uid="uid://8s2wdi5le4ti" path="res://scripts/control_node_and_balls/control_node.gd" id="1_0jkta"]
[ext_resource type="Script" uid="uid://cmlfnal2o37ys" path="res://addons/godot_state_charts/state_chart.gd" id="2_qi4cr"]
[ext_resource type="Script" uid="uid://bhy7it06w5oxr" path="res://addons/godot_state_charts/compound_state.gd" id="3_8s4nh"]
[ext_resource type="Script" uid="uid://b2onxl0bnlyi7" path="res://addons/godot_state_charts/atomic_state.gd" id="4_2p3vg"]
[ext_resource type="Script" uid="uid://g3cjsxu4h2a2" path="res://addons/godot_state_charts/transition.gd" id="5_tbext"]
[ext_resource type="PhysicsMaterial" uid="uid://besahl7f6jbkx" path="res://resources/ball_physics_material.tres" id="6_r313a"]
[ext_resource type="Script" uid="uid://cic2t11pr7yp1" path="res://scripts/inert_node.gd" id="7_cnds4"]
[ext_resource type="PackedScene" uid="uid://caxwuwjjre3j2" path="res://scenes/control_node_and_balls/direction_ray.tscn" id="8_nbe53"]
[ext_resource type="PackedScene" uid="uid://bkp8fbjsyyhyx" path="res://scenes/control_node_and_balls/assets/control_node_asset.tscn" id="9_0jkta"]

[sub_resource type="SphereShape3D" id="SphereShape3D_8bm52"]
radius = 0.168602

[node name="ControlNode" type="Node3D"]
script = ExtResource("1_0jkta")

[node name="State" type="Node" parent="."]
script = ExtResource("2_qi4cr")
track_in_editor = true

[node name="Root" type="Node" parent="State"]
script = ExtResource("3_8s4nh")
initial_state = NodePath("inert")

[node name="inert" type="Node" parent="State/Root"]
script = ExtResource("4_2p3vg")

[node name="to dribbled" type="Node" parent="State/Root/inert"]
script = ExtResource("5_tbext")
to = NodePath("../../dribbled")
event = &"inert to dribbled"
delay_in_seconds = "0.0"

[node name="dribbled" type="Node" parent="State/Root"]
script = ExtResource("4_2p3vg")

[node name="to inert" type="Node" parent="State/Root/dribbled"]
script = ExtResource("5_tbext")
to = NodePath("../../inert")
event = &"dribbled to inert"
delay_in_seconds = "0.0"

[node name="InertNode" type="RigidBody3D" parent="."]
collision_layer = 4
collision_mask = 266
input_ray_pickable = false
axis_lock_linear_z = true
axis_lock_angular_x = true
axis_lock_angular_y = true
physics_material_override = ExtResource("6_r313a")
can_sleep = false
contact_monitor = true
max_contacts_reported = 1
angular_damp = 3.0
script = ExtResource("7_cnds4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="InertNode"]
shape = SubResource("SphereShape3D_8bm52")

[node name="DribbledNode" type="CharacterBody3D" parent="."]
collision_layer = 4
collision_mask = 266
axis_lock_linear_z = true
axis_lock_angular_x = true
axis_lock_angular_y = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="DribbledNode"]
shape = SubResource("SphereShape3D_8bm52")

[node name="DirectionRay" parent="." instance=ExtResource("8_nbe53")]

[node name="ModelContainer" type="Node3D" parent="."]

[node name="ControlNodeAsset" parent="ModelContainer" instance=ExtResource("9_0jkta")]
transform = Transform3D(1.2, 0, 0, 0, 1.2, 0, 0, 0, 1.2, 0, 0, 0)

[connection signal="state_physics_processing" from="State/Root/inert" to="." method="_on_inert_state_physics_processing"]
[connection signal="state_entered" from="State/Root/dribbled" to="." method="_on_dribbled_state_entered"]
[connection signal="state_exited" from="State/Root/dribbled" to="." method="_on_dribbled_state_exited"]
[connection signal="state_physics_processing" from="State/Root/dribbled" to="." method="_on_dribbled_state_physics_processing"]
[connection signal="body_entered" from="InertNode" to="." method="_on_inert_node_body_entered"]
